<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BJJ 롤 스타일 테스트 — 탑 vs 가드 (분석 리포트)</title>
<meta name="description" content="주짓수 롤 스타일 11문항 테스트: 탑 플레이어 vs 가드 플레이어 — 결과를 분석 리포트로 제공합니다." />
<style>
  :root{
    --fg:#0f172a; --muted:#64748b; --bg:#ffffff; --card:#f8fafc;
    --accent:#2563eb; --accent2:#14b8a6; --warn:#f59e0b; --border:#e2e8f0;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Apple SD Gothic Neo','Noto Sans KR',Arial,sans-serif;color:var(--fg);background:linear-gradient(180deg,#fff,#f6f9ff 45%,#eef3ff)}
  .wrap{max-width:920px;margin:0 auto;padding:24px}
  header{margin:4px 0 16px}
  h1{font-size:28px;margin:0 0 6px}
  p.lead{color:var(--muted);margin:0}
  .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px;margin:12px 0}
  .q-title{font-weight:800;margin-bottom:10px}
  .opt{display:block;background:#fff;border:1px solid var(--border);border-radius:12px;padding:12px;cursor:pointer;margin:8px 0;transition:all .15s}
  .opt:hover{border-color:var(--accent)}
  input[type=radio]{accent-color:var(--accent);transform:scale(1.15);margin-right:8px}
  .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
  button{border:0;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
  .primary{background:var(--accent);color:#fff}
  .ghost{background:#fff;border:1px solid var(--border)}
  .success{background:var(--accent2);color:#fff}
  .muted{color:var(--muted)}
  .progress{height:8px;background:#eaeef4;border-radius:99px;overflow:hidden;margin:10px 0 6px}
  .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#6ee7b7)}
  .small{font-size:13px}
  .result h2{margin:8px 0 6px}
  .grid{display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:860px){.grid{grid-template-columns:1.1fr 0.9fr}}
  .pill{display:inline-block;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:#fff;margin:4px 6px 0 0;font-size:12px}
  .footer{margin:20px 0;color:var(--muted);font-size:12px}
  .hidden{display:none}
  .sharebox{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  input.link{flex:1 1 260px;border:1px solid var(--border);border-radius:10px;padding:10px;background:#fff}
  .kpis{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .kbar{background:#fff;border:1px solid var(--border);border-radius:12px;padding:10px}
  .klabel{font-size:12px;color:var(--muted);margin-bottom:6px}
  .kfill{height:10px;background:linear-gradient(90deg,var(--accent),#60a5fa);border-radius:999px;width:0}
  .kfill2{height:10px;background:linear-gradient(90deg,#22c55e,#a3e635);border-radius:999px;width:0}
  .taglist{margin-top:6px}
  .callout{background:#fff;border:1px dashed var(--border);padding:10px;border-radius:12px}
  .warn{color:#b45309}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>BJJ 롤 스타일 테스트 🧭</h1>
    <p class="lead">11문항으로 **탑 vs 가드** 성향을 측정하고, 결과를 **분석 리포트**로 보여드립니다.</p>
  </header>

  <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>
  <div class="small muted" id="count">0 / 11</div>

  <form id="quiz" class="card"></form>

  <div class="actions">
    <button type="button" class="ghost" id="prevBtn">이전</button>
    <button type="button" class="primary" id="nextBtn">다음</button>
    <button type="submit" class="success hidden" id="submitBtn">결과 보기</button>
  </div>

  <section id="result" class="card result hidden"></section>

  <div class="footer">ⓒ 2025 GrappleNet • 취미용 테스트이며 실제 훈련은 코치와 상의하세요.</div>
</div>

<script>
/* =========================
   분류: 탑 / 가드 / (유머) 애매
   - 초기 화면에는 '애매' 언급 없음
   - 결과가 애매하면 유머러스하게 표현
   - 분석 리포트: 점수, 일관성, 핵심 드라이버, 보완 포인트
========================= */
const CATS = {
  TOP:   { key:"TOP",   name:"탑 플레이어",   desc:"패싱과 포지션 컨트롤로 상위에서 압박합니다." },
  GUARD: { key:"GUARD", name:"가드 플레이어", desc:"하위 포지션에서 각종 가드로 주도권을 잡습니다." },
  NONE:  { key:"NONE",  name:"판단 보류(!)",  desc:"오늘은 우주가 당신의 성향을 숨겼어요 😅 다음 롤에서 힌트를 더 주세요!" }
};

// 11문항 — guard/top 축 점수와 분석 힌트/태그를 함께 수집
const QUESTIONS = [
  { id:"pref", title:"1) 롤 시작 기본 선호는?", options:[
    {label:"시팅 가드/가드풀", map:{guard:2, top:0}, hint:"가드풀 선호", tags:["시팅가드","가드풀"]},
    {label:"테이크다운으로 탑", map:{guard:0, top:2}, hint:"업/다운 자신감", tags:["테이크다운","탑선점"]},
    {label:"상대 따라 유연", map:{guard:1, top:1}, hint:"전술 유연성", tags:["전술유연","상대대응"]} ]},
  { id:"passing", title:"2) 패스 vs 스윕 성공률?", options:[
    {label:"스윕/서브가 더 잘됨", map:{guard:2, top:0}, hint:"스윕 위협", tags:["스윕체인","바텀서브"]},
    {label:"패싱/컨트롤이 강함", map:{guard:0, top:2}, hint:"패싱 압박", tags:["니컷/롱스텝","사이드컨트롤"]},
    {label:"비슷하다", map:{guard:1, top:1}, hint:"균형형", tags:["밸런스"]} ]},
  { id:"guards", title:"3) 즐겨 쓰는 가드 타입?", options:[
    {label:"버터플라이/데라/라쏘", map:{guard:2, top:0}, hint:"모빌 가드", tags:["버터플라이","데라히바"]},
    {label:"클로즈드/하프→스윕", map:{guard:2, top:0}, hint:"전통 가드", tags:["클로즈드","하프"]},
    {label:"가드보단 패싱", map:{guard:0, top:2}, hint:"패스 지향", tags:["패스체인","베이스"]} ]},
  { id:"wrestle", title:"4) 레슬링/업다운 자신감?", options:[
    {label:"낮음(가드풀 편함)", map:{guard:2, top:0}, hint:"업다운 보완", tags:["업다운보완"]},
    {label:"높음(탑 가져감)", map:{guard:0, top:2}, hint:"업다운 강점", tags:["업다운강점"]},
    {label:"보통", map:{guard:1, top:1}, hint:"평균", tags:["평균"]} ]},
  { id:"pace", title:"5) 템포/운영 스타일?", options:[
    {label:"리액티브(카운터/세팅)", map:{guard:2, top:1}, hint:"리액티브 운영", tags:["카운터","세팅"]},
    {label:"프로액티브(압박/패싱)", map:{guard:0, top:2}, hint:"프로액티브 압박", tags:["압박","라인브레이크"]},
    {label:"상황 스위치", map:{guard:1, top:1}, hint:"전환형", tags:["전환"]} ]},
  { id:"subs", title:"6) 제출기 경향?", options:[
    {label:"삼각/암바 등 바텀 서브", map:{guard:2, top:0}, hint:"바텀 서브 체인", tags:["삼각","암바"]},
    {label:"초크/아메리카나 등 탑 서브", map:{guard:0, top:2}, hint:"탑 서브 체인", tags:["초크","아메리카나"]},
    {label:"둘 다 나온다", map:{guard:1, top:1}, hint:"이중 위협", tags:["이중위협"]} ]},
  { id:"passes", title:"7) 주력 패스/브레이크다운?", options:[
    {label:"가드 전개/언밸런싱", map:{guard:2, top:0}, hint:"언밸런싱", tags:["언밸런싱","엔트리"]},
    {label:"니컷/롱스텝/토리안도", map:{guard:0, top:2}, hint:"패스 체인", tags:["니컷","롱스텝","토리안도"]},
    {label:"상황 따라 섞음", map:{guard:1, top:1}, hint:"믹스 전략", tags:["믹스"]} ]},
  { id:"pressure", title:"8) 압박/무게중심 컨트롤?", options:[
    {label:"중간 이하", map:{guard:1, top:0}, hint:"압박 과제", tags:["압박보완"]},
    {label:"강하다", map:{guard:0, top:2}, hint:"압박 강점", tags:["헤비프레셔"]},
    {label:"보통", map:{guard:1, top:1}, hint:"평균 압박", tags:["평균압박"]} ]},
  { id:"retention", title:"9) 가드 리텐션 자신감?", options:[
    {label:"높음", map:{guard:2, top:0}, hint:"리텐션 강점", tags:["리텐션"]},
    {label:"낮음", map:{guard:0, top:1}, hint:"리텐션 과제", tags:["리텐션보완"]},
    {label:"보통", map:{guard:1, top:1}, hint:"보통", tags:["보통"]} ]},
  { id:"coach", title:"10) 코치가 더 강조하는 건?", options:[
    {label:"가드 디테일", map:{guard:2, top:0}, hint:"가드 디테일", tags:["그립/각도"]},
    {label:"패스 디테일", map:{guard:0, top:2}, hint:"패스 디테일", tags:["헤드포지션","베이스"]},
    {label:"전환/타이밍", map:{guard:1, top:1}, hint:"전환 디테일", tags:["타이밍"]} ]},
  { id:"mind", title:"11) 어디서 더 자신감?", options:[
    {label:"바텀", map:{guard:2, top:0}, hint:"바텀 자신감", tags:["바텀세이프"]},
    {label:"탑", map:{guard:0, top:2}, hint:"탑 자신감", tags:["탑세이프"]},
    {label:"둘 다", map:{guard:1, top:1}, hint:"양면 자신감", tags:["양면세이프"]} ]}
];

const quizEl = document.getElementById('quiz');
const barEl = document.getElementById('bar');
const countEl = document.getElementById('count');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const submitBtn = document.getElementById('submitBtn');
const resultEl = document.getElementById('result');

let currentIndex = 0;
const answers = {}; // id -> option index
const dim = { guard:0, top:0 };

function renderQuestion(i){
  quizEl.innerHTML = '';
  const q = QUESTIONS[i];
  const title = document.createElement('div');
  title.className='q-title';
  title.textContent = q.title;
  quizEl.appendChild(title);

  q.options.forEach((opt, idx) => {
    const label = document.createElement('label');
    label.className = 'opt';
    const input = document.createElement('input');
    input.type = 'radio';
    input.name = q.id;
    input.value = idx;
    input.checked = answers[q.id] === idx;
    input.addEventListener('change', ()=> { answers[q.id] = idx; updateNav(); });
    const span = document.createElement('span');
    span.textContent = opt.label;
    label.appendChild(input);
    label.appendChild(span);
    quizEl.appendChild(label);
  });

  updateProgress();
  updateNav();
}

function updateProgress(){
  const answered = Object.keys(answers).length;
  const pct = Math.round((answered/QUESTIONS.length)*100);
  barEl.style.width = pct + '%';
  countEl.textContent = `${Math.min(currentIndex+1, QUESTIONS.length)} / ${QUESTIONS.length}`;
}

function updateNav(){
  prevBtn.disabled = currentIndex===0;
  const q = QUESTIONS[currentIndex];
  const hasAnswer = answers[q.id] !== undefined
